---
# Finnish characters
#
# Finnish specification for 6 dot math braille on the braille authority's web page (https://www.pistekirjoitus.fi/julkaisut/matematiikka-ja-tietotekniikka/) titled "Matematiikan, fysiikan ja kemain pistemerkinnÃ¤t". Roughly translates to "Braille for mathematics, physics and chemistry." These rules are based on the edition published in 2022.
#
# Some chars that originally came from an Excel spreadsheet created by Georgios Kouroupetroglou (see https://access.uoa.gr/mathbraille), based on Swedish characters.
# 
# The UEB translation makes use of some non-braille chars as flags
#    L -- what follows is a letter
#    N -- what follows is a digit
#    C -- precedes L for capital letters
#    G -- precedes L for Greek Letters (after C for capitals)
#  Typeface Indicators ("typeforms")
#    B bold, I Italic, S Sans-serif, T script, D, Fraktur, ğ”¹ blackboard-bold
#    the type face indicators can be combined with B (first) and I (second)
#  Standing alone chars:
#    Any character which acts as a standing alone character (e.g, "{") needs each braille symbol to be labeled
#    o -- opening/left side, c -- closing/right side, b -- both open and close (e.g, '"')

 - "0": [T: "Nâ š"]                # 0x0030 (digit zero)
 - "1": [T: "Nâ "]                # 0x0031 (digit one)
 - "2": [T: "Nâ ƒ"]                # 0x0032 (digit two)
 - "3": [T: "Nâ ‰"]                # 0x0033 (digit three)
 - "4": [T: "Nâ ™"]                # 0x0034 (digit four)
 - "5": [T: "Nâ ‘"]                # 0x0035 (digit five)
 - "6": [T: "Nâ ‹"]                # 0x0036 (digit six)
 - "7": [T: "Nâ ›"]                # 0x0037 (digit seven)
 - "8": [T: "Nâ “"]                # 0x0038 (digit eight)
 - "9": [T: "Nâ Š"]                # 0x0039 (digit nine)

 - " ":                        # 0x20 (Space)
     - test:
        if: "self::m:mn"
        then: [T: "Nâ „"]
        else: [T: "W"]
 - "Â ":                        # 0xa0 (Non-breaking Space)
     - test:
        - if: "self::m:mn"
          then: [T: "Nâ „"]
        - else_if: "following-sibling::*[1][@class='MathML-unit' or BaseNode(.)[@class='MathML-unit']]"
          then: [T: "ğ–"]
          else: [T: "W"]
 - ",":                        # 0x2c (Comma)
     - test:
        if: "self::m:mn"
        then: [T: "Nâ ‚"]
        else: [T: ",W"]

 - "â¡":                            # 0x2061â¡ (invisible function apply)
    - test:  # add some whitespace for the function apply for  "tan x", etc
        if:
        - "preceding-sibling::*[1][IsInDefinition(BaseNode(.), 'Braille', 'TrigFunctionNames')] and " 
        - "not(following-sibling::*[1][IsBracketed(., '', '')])"
        then: [t: "W"]
        else: [t: ""]

 - "â¢":                        # 0x2062 (invisible times)
     - test:
        #  don't add whitespace when you have consecutive vars (taking into account pseudo scripts), or...
        #  if what follows is an opening bracket (any kind) or a 2D structure
        if: "not(preceding-sibling::*[1][IsNode(., 'leaf') or (self::m:msup and *[2][translate(., '*`ÂªÂ°Â²Â³Â´Â¹Âºâ€˜â€™â€œâ€â€Ÿâ€²â€³â€´â€µâ€¶â€·â—','')=''] )] and
                 following-sibling::*[1][IsNode(., 'leaf') ]
             ) and
             not(@data-function-guess) and
             (preceding-sibling::*[1][IsNode(., '2D')] or
              following-sibling::*[1][IsNode(., '2D') or (self::m:mrow and *[1][.='(' or .='['])])"
        then: [t: "W"]
        else: [t: ""]

 - "â£": [T: ""]                 # 0x2063â¡ (invisible separator)
 - "â¤": [T: ""]                 # 0x2064 (invisible plus)

 # we stick the drop numbers into the private use area for consistency (they are labeled differently so dot-6 can inserted)
 - "\ue000": [T: "nâ ´"]               # 0 
 - "\ue001": [T: "nâ ‚"]               # 1 
 - "\ue002": [T: "nâ †"]               # 2 
 - "\ue003": [T: "nâ ’"]               # 3 
 - "\ue004": [T: "nâ ²"]               # 4 
 - "\ue005": [T: "nâ ¢"]               # 5 
 - "\ue006": [T: "nâ –"]               # 6 
 - "\ue007": [T: "nâ ¶"]               # 7 
 - "\ue008": [T: "nâ ¦"]               # 8 
 - "\ue009": [T: "nâ ”"]               # 9 

 - "a": [T: "Lâ "]               # 0x61 
 - "b": [T: "Lâ ƒ"]               # 0x62 
 - "c": [T: "Lâ ‰"]               # 0x63 
 - "d": [T: "Lâ ™"]               # 0x64 
 - "e": [T: "Lâ ‘"]               # 0x65 
 - "f": [T: "Lâ ‹"]               # 0x66 
 - "g": [T: "Lâ ›"]               # 0x67 
 - "h": [T: "Lâ “"]               # 0x68 
 - "i": [T: "Lâ Š"]               # 0x69 
 - "j": [T: "Lâ š"]               # 0x6a 
 - "k": [T: "Lâ …"]               # 0x6b 
 - "l": [T: "Lâ ‡"]               # 0x6c 
 - "m": [T: "Lâ "]               # 0x6d 
 - "n": [T: "Lâ "]               # 0x6e 
 - "o": [T: "Lâ •"]               # 0x6f 
 - "p": [T: "Lâ "]               # 0x70 
 - "q": [T: "Lâ Ÿ"]               # 0x71 
 - "r": [T: "Lâ —"]               # 0x72 
 - "s": [T: "Lâ "]               # 0x73 
 - "t": [T: "Lâ "]               # 0x74 
 - "u": [T: "Lâ ¥"]               # 0x75 
 - "v": [T: "Lâ §"]               # 0x76 
 - "w": [T: "Lâ º"]               # 0x77 
 - "x": [T: "Lâ ­"]               # 0x78 
 - "y": [T: "Lâ ½"]               # 0x79 
 - "z": [T: "Lâ µ"]               # 0x7a
 - "Ã¥": [T: "Lâ ¡"]           # FI: Finnish alphabet
 - "Ã¤": [T: "Lâ œ"]           # FI: Finnish alphabet
 - "Ã¶": [T: "Lâ ª"]           # FI: Finnish alphabet

 - "Ä‘": [t: "Lâ ®"]
 - "Ã¡": [t: "Lâ ”Lâ "]
 - "Ã ": [t: "Lâ °Lâ "]
 - "áº£": [t: "Lâ ¢Lâ "]
 - "Ã£": [t: "Lâ ¤Lâ "]
 - "áº¡": [t: "Lâ  Lâ "]
 - "Ã¢": [t: "Lâ ¡"]
 - "áº¥": [t: "Lâ ”Lâ ¡"]
 - "áº§": [t: "Lâ °Lâ ¡"]
 - "áº©": [t: "Lâ ¢Lâ ¡"]
 - "áº«": [t: "Lâ ¤Lâ ¡"]
 - "áº­": [t: "Lâ  Lâ ¡"]
 - "Äƒ": [t: "Lâ œ"]
 - "áº¯": [t: "Lâ ”Lâ œ"]
 - "áº±": [t: "Lâ °Lâ œ"]
 - "áº³": [t: "Lâ ¢Lâ œ"]
 - "áºµ": [t: "Lâ ¤Lâ œ"]
 - "áº·": [t: "Lâ  Lâ œ"]
 - "Ã©": [t: "Lâ ”Lâ ‘"]
 - "Ã¨": [t: "Lâ °Lâ ‘"]
 - "áº»": [t: "Lâ ¢Lâ ‘"]
 - "áº½": [t: "Lâ ¤Lâ ‘"]
 - "áº¹": [t: "Lâ  Lâ ‘"]
 - "Ãª": [t: "Lâ £"]
 - "áº¿": [t: "Lâ ”Lâ £"]
 - "á»": [t: "Lâ °Lâ £"]
 - "á»ƒ": [t: "Lâ ¢Lâ £"]
 - "á»…": [t: "Lâ ¤Lâ £"]
 - "á»‡": [t: "Lâ  Lâ £"]
 - "Ã­": [t: "Lâ ”Lâ Š"]
 - "Ã¬": [t: "Lâ °Lâ Š"]
 - "á»‰": [t: "Lâ ¢Lâ Š"]
 - "Ä©": [t: "Lâ ¤Lâ Š"]
 - "á»‹": [t: "Lâ  Lâ Š"]
 - "Ã³": [t: "Lâ ”Lâ •"]
 - "Ã²": [t: "Lâ °Lâ •"]
 - "á»": [t: "Lâ ¢Lâ •"]
 - "Ãµ": [t: "Lâ ¤Lâ •"]
 - "á»": [t: "Lâ  Lâ •"]
 - "Ã´": [t: "Lâ ¹"]
 - "á»‘": [t: "Lâ ”Lâ ¹"]
 - "á»“": [t: "Lâ °Lâ ¹"]
 - "á»•": [t: "Lâ ¢Lâ ¹"]
 - "á»—": [t: "Lâ ¤Lâ ¹"]
 - "á»™": [t: "Lâ  Lâ ¹"]
 - "Æ¡": [t: "Lâ ª"]
 - "á»›": [t: "Lâ ”Lâ ª"]
 - "á»": [t: "Lâ °Lâ ª"]
 - "á»Ÿ": [t: "Lâ ¢Lâ ª"]
 - "á»¡": [t: "Lâ ¤Lâ ª"]
 - "á»£": [t: "Lâ  Lâ ª"]
 - "Ãº": [t: "Lâ ”Lâ ¥"]
 - "Ã¹": [t: "Lâ °Lâ ¥"]
 - "á»§": [t: "Lâ ¢Lâ ¥"]
 - "Å©": [t: "Lâ ¤Lâ ¥"]
 - "á»¥": [t: "Lâ  Lâ ¥"]
 - "Æ°": [t: "Lâ ³"]
 - "á»©": [t: "Lâ ”Lâ ³"]
 - "á»«": [t: "Lâ °Lâ ³"]
 - "á»­": [t: "Lâ ¢Lâ ³"]
 - "á»¯": [t: "Lâ ¤Lâ ³"]
 - "á»±": [t: "Lâ  Lâ ³"]
 - "Ã½": [t: "Lâ ”Lâ ½"]
 - "á»³": [t: "Lâ °Lâ ½"]
 - "á»·": [t: "Lâ ¢Lâ ½"]
 - "á»¹": [t: "Lâ ¤Lâ ½"]
 - "á»µ": [t: "Lâ  Lâ ½"]

 - "Ä": [t: "CLâ ®"]
 - "Ã": [t: "CLâ ”ğ‘Lâ "]
 - "Ã€": [t: "CLâ °ğ‘Lâ "]
 - "áº¢": [t: "CLâ ¢ğ‘Lâ "]
 - "Ãƒ": [t: "CLâ ¤ğ‘Lâ "]
 - "áº ": [t: "CLâ  ğ‘Lâ "]
 - "Ã‚": [t: "CLâ ¡"]
 - "áº¤": [t: "CLâ ”ğ‘Lâ ¡"]
 - "áº¦": [t: "CLâ °ğ‘Lâ ¡"]
 - "áº¨": [t: "CLâ ¢ğ‘Lâ ¡"]
 - "áºª": [t: "CLâ ¤ğ‘Lâ ¡"]
 - "áº¬": [t: "CLâ  ğ‘Lâ ¡"]
 - "Ä‚": [t: "CLâ œ"]
 - "áº®": [t: "CLâ ”ğ‘Lâ œ"]
 - "áº°": [t: "CLâ °ğ‘Lâ œ"]
 - "áº²": [t: "CLâ ¢ğ‘Lâ œ"]
 - "áº´": [t: "CLâ ¤ğ‘Lâ œ"]
 - "áº¶": [t: "CLâ  ğ‘Lâ œ"]
 - "Ã‰": [t: "CLâ ”ğ‘Lâ ‘"]
 - "Ãˆ": [t: "CLâ °ğ‘Lâ ‘"]
 - "áºº": [t: "CLâ ¢ğ‘Lâ ‘"]
 - "áº¼": [t: "CLâ ¤ğ‘Lâ ‘"]
 - "áº¸": [t: "CLâ  ğ‘Lâ ‘"]
 - "ÃŠ": [t: "CLâ £"]
 - "áº¾": [t: "CLâ ”ğ‘Lâ £"]
 - "á»€": [t: "CLâ °ğ‘Lâ £"]
 - "á»‚": [t: "CLâ ¢ğ‘Lâ £"]
 - "á»„": [t: "CLâ ¤ğ‘Lâ £"]
 - "á»†": [t: "CLâ  ğ‘Lâ £"]
 - "Ã": [t: "CLâ ”ğ‘Lâ Š"]
 - "ÃŒ": [t: "CLâ °ğ‘Lâ Š"]
 - "á»ˆ": [t: "CLâ ¢ğ‘Lâ Š"]
 - "Ä¨": [t: "CLâ ¤ğ‘Lâ Š"]
 - "á»Š": [t: "CLâ  ğ‘Lâ Š"]
 - "Ã“": [t: "CLâ ”ğ‘Lâ •"]
 - "Ã’": [t: "CLâ °ğ‘Lâ •"]
 - "á»": [t: "CLâ ¢ğ‘Lâ •"]
 - "Ã•": [t: "CLâ ¤ğ‘Lâ •"]
 - "á»Œ": [t: "CLâ  ğ‘Lâ •"]
 - "Ã”": [t: "CLâ ¹"]
 - "á»": [t: "CLâ ”ğ‘Lâ ¹"]
 - "á»’": [t: "CLâ °ğ‘Lâ ¹"]
 - "á»”": [t: "CLâ ¢ğ‘Lâ ¹"]
 - "á»–": [t: "CLâ ¤ğ‘Lâ ¹"]
 - "á»˜": [t: "CLâ  ğ‘Lâ ¹"]
 - "Æ ": [t: "CLâ ª"]
 - "á»š": [t: "CLâ ”ğ‘Lâ ª"]
 - "á»œ": [t: "CLâ °ğ‘Lâ ª"]
 - "á»": [t: "CLâ ¢ğ‘Lâ ª"]
 - "á» ": [t: "CLâ ¤ğ‘Lâ ª"]
 - "á»¢": [t: "CLâ  ğ‘Lâ ª"]
 - "Ãš": [t: "CLâ ”ğ‘Lâ ¥"]
 - "Ã™": [t: "CLâ °ğ‘Lâ ¥"]
 - "á»¦": [t: "CLâ ¢ğ‘Lâ ¥"]
 - "Å¨": [t: "CLâ ¤ğ‘Lâ ¥"]
 - "á»¤": [t: "CLâ  ğ‘Lâ ¥"]
 - "Æ¯": [t: "CLâ ³"]
 - "á»¨": [t: "CLâ ”ğ‘Lâ ³"]
 - "á»ª": [t: "CLâ °ğ‘Lâ ³"]
 - "á»¬": [t: "CLâ ¢ğ‘Lâ ³"]
 - "á»®": [t: "CLâ ¤ğ‘Lâ ³"]
 - "á»°": [t: "CLâ  ğ‘Lâ ³"]
 - "Ã": [t: "CLâ ”ğ‘Lâ ½"]
 - "á»²": [t: "CLâ °ğ‘Lâ ½"]
 - "á»¶": [t: "CLâ ¢ğ‘Lâ ½"]
 - "á»¸": [t: "CLâ ¤ğ‘Lâ ½"]
 - "á»´": [t: "CLâ  ğ‘Lâ ½"]

 - "A": [T: "CLâ "]              # 0x41 
 - "B":                         # 0x42 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ ƒ"]
        else: [T: "CLâ ƒ"]
 - "C":                         # 0x43 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ ‰"]
        else: [T: "CLâ ‰"]
 - "D": [T: "CLâ ™"]              # 0x44 
 - "E": [T: "CLâ ‘"]              # 0x45 
 - "F": [T: "CLâ ‹"]              # 0x46 
 - "G": [T: "CLâ ›"]              # 0x47 
 - "H":                         # 0x48 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ “"]
        else: [T: "CLâ “"]
 - "I":                         # 0x49 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ Š"]
        else: [T: "CLâ Š"]
 - "J": [T: "CLâ š"]              # 0x4a 
 - "K":                         # 0x4b 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ …"]
        else: [T: "CLâ …"]
 - "L": [T: "CLâ ‡"]              # 0x4c 
 - "M": [T: "CLâ "]              # 0x4d 
 - "N":                         # 0x4e 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ "]
        else: [T: "CLâ "]
 - "O":                         # 0x4f 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ •"]
        else: [T: "CLâ •"]
 - "P":                         # 0x50 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ "]
        else: [T: "CLâ "]
 - "Q": [T: "CLâ Ÿ"]              # 0x51 
 - "R": [T: "CLâ —"]              # 0x52 
 - "S":                         # 0x53 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ "]
        else: [T: "CLâ "]
 - "T": [T: "CLâ "]              # 0x54 
 - "U":                         # 0x55 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ ¥"]
        else: [T: "CLâ ¥"]
 - "V":                         # 0x56 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ §"]
        else: [T: "CLâ §"]
 - "W":                         # 0x57 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ º"]
        else: [T: "CLâ º"]
 - "X": [T: "CLâ ­"]              # 0x58 
 - "Y":                         # 0x59 
    - test:
        if: "@data-chem-element"
        then: [T: "ğ¶Lâ ½"]
        else: [T: "CLâ ½"]
 - "\\":                       # 0x005C (Backslash)
     - test:
          # we need to recognize "set difference" -- heuristic is the operands are both capital letters
        if: "@intent='set-difference' or
                    parent::*[1][self::m:mrow and count(*)=3 and
                              *[1][self::m:mi and string-length(.) = 1 and translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', '') = ''] and
                              *[3][self::m:mi and string-length(.) = 1 and translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', '') = ''] ]"
        then: [t: "Wâ ³â ©"]        # set difference
        else: [t: "â ©"]
 - "Z": [T: "CLâ µ"]              # 0x5a
 - "Ã…": [T: "CLâ ¡"]           # FI: Finnish alphabet
 - "Ã„": [T: "CLâ œ"]           # FI: Finnish alphabet
 - "Ã–": [T: "CLâ ª"]           # FI: Finnish alphabet

 - "Î±": [T: "GLâ "]              # 0x3b1 
 - "Î²": [T: "GLâ ƒ"]              # 0x3b2 
 - "Î³": [T: "GLâ ›"]              # 0x3b3 
 - "Î´": [T: "GLâ ™"]              # 0x3b4 
 - "Îµ": [T: "GLâ ‘"]              # 0x3b5 
 - "Î¶": [T: "GLâ µ"]              # 0x3b6 
 - "Î·": [T: "GLâ œ"]           # 0x3b7 
 - "Î¸": [T: "GLâ ¹"]              # 0x3b8 
 - "Î¹": [T: "GLâ Š"]              # 0x3b9 
 - "Îº": [T: "GLâ …"]              # 0x3ba 
 - "Î»": [T: "GLâ ‡"]              # 0x3bb 
 - "Î¼": [T: "GLâ "]              # 0x3bc 
 - "Î½": [T: "GLâ "]              # 0x3bd 
 - "Î¾": [T: "GLâ ­"]              # 0x3be 
 - "Î¿": [T: "GLâ •"]              # 0x3bf 
 - "Ï€": [T: "GLâ "]              # 0x3c0 
 - "Ï": [T: "GLâ —"]              # 0x3c1 
 - "Ï‚": [T: "GLâ "]              # 0x3c2 
 - "Ïƒ": [T: "GLâ "]              # 0x3c3 
 - "Ï„": [T: "GLâ "]              # 0x3c4 
 - "Ï…": [T: "GLâ ½"]              # 0x3c5 
 - "Ï†": [T: "GLâ ‹"]              # 0x3c6 
 - "Ï•": [T: "GLâ ‹"]              # 0x3c6 
 - "Ï‡": [T: "GLâ “"]              # 0x3c7 
 - "Ïˆ": [T: "GLâ ¯"]              # 0x3c8 
 - "Ï‰": [T: "GLâ š"]             # 0x3c9

 - "Î‘": [T: "CGLâ "]             # 0x391 
 - "Î’": [T: "CGLâ ƒ"]             # 0x392 
 - "Î“": [T: "CGLâ ›"]             # 0x393 
 - "Î”": [T: "CGLâ ™"]             # 0x394 
 - "Î•": [T: "CGLâ ‘"]             # 0x395 
 - "Î–": [T: "CGLâ µ"]             # 0x396 
 - "Î—": [T: "CGLâ œ"]          # 0x397 
 - "Î˜": [T: "CGLâ ¹"]             # 0x398 
 - "Î™": [T: "CGLâ Š"]             # 0x399 
 - "Îš": [T: "CGLâ …"]             # 0x39a 
 - "Î›": [T: "CGLâ ‡"]             # 0x39b 
 - "Îœ": [T: "CGLâ "]             # 0x39c 
 - "Î": [T: "CGLâ "]             # 0x39d 
 - "Î": [T: "CGLâ ­"]             # 0x39e 
 - "ÎŸ": [T: "CGLâ •"]             # 0x39f 
 - "Î ": [T: "CGLâ "]             # 0x3a0 
 - "Î¡": [T: "CGLâ —"]             # 0x3a1 
 - "Î¢": [T: "CGLâ "]             # 0x3a2 
 - "Î£": [T: "CGLâ "]             # 0x3a3 
 - "Î¤": [T: "CGLâ "]             # 0x3a4 
 - "Î¥": [T: "CGLâ ½"]         # 0x3a5 
 - "Î¦": [T: "CGLâ ‹"]             # 0x3a6 
 - "Î§": [T: "CGLâ “"]             # 0x3a7 
 - "Î¨": [T: "CGLâ ¯"]             # 0x3a8 
 - "Î©": [T: "CGLâ š"]             # 0x3a9

# FI: These Greek letters could be removed, because they are the same as above?
 - "Âµ": [T: "GLâ "]              # 0x00B5 (Micro (Greek mu))
 - "â„¦": [T: "CGLâ š"]             # 0x2126 (Ohm sign (capital Greek omega))
 - "âˆ†": [T: "CGLâ ™"]             # 0x2206 (Increment (capital Greek delta))
 - "âˆ": [T: "CGLâ "]             # 0x220F (Product (capital Greek pi))
 - "âˆ‘": [T: "CGLâ "]             # 0x2211 (Sum (capital Greek sigma))

 - "!":                        # 0x0021 (exclamation point) 
    - test:
        if: "self::m:mtext"
        then: [t: "â ²"]          # FI: regular exclamation point in text
        else: [t: "â  â ²"]         # FI: factorial

 - "$": [T: "â ®"]                # 0x0024 (dollar sign)
 - "%": [T: "â ¹"]                # 0x0025 (percent sign)
 - "&": [T: "â ¯"]                # 0x0026 (ampersand (and, logical product))
 - "(": [T: "("]                # 0x0028 (left parenthesis -- handled later)
 - ")": [T: ")"]                # 0x0029 (right parenthesis -- handled later)
 - "+":                         # 0x002B (regular plus)
     - test:               
        if: "self::m:mo and parent::m:mrow and preceding-sibling::*"
        then: [t: "Wâ –"]         # infix plus
        else: [t: "â –"]          # unary plus
 - "-":                         # 0x002D (minus)
     - test:
        - if: "@data-chemical-bond"
          then: [t: "Wâ ’"]
          # we need to recognize "set difference" -- heuristic is the operands are both capital letters
        - else_if: "@intent='set-difference' or
                    parent::*[1][self::m:mrow and count(*)=3 and
                              *[1][self::m:mi and string-length(.) = 1 and translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', '') = ''] and
                              *[3][self::m:mi and string-length(.) = 1 and translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', '') = ''] ]"
          then: [t: "Wâ ³â ¤"]        # set difference
        - else_if: "self::m:mo and parent::m:mrow and preceding-sibling::*"
          then: [t: "Wâ ¤"]        # infix minus
          else: [t: "â ¤"]         # unary minus
 - ".":                 # 0x002E # FI: used as a thousand separator
    - test:
        if: "self::m:mn"
        then: [T: "Nâ „"]
        else: [T: "â „"]

 - "/": [T: "Wâ Œ"]                # 0x002F (diagonal fraction line)
 - "Ã·": [T: "Wâ Œ"]               # 0x00F7 FI: Used as division sign.

 - ":":                         # 0x003A (colon)
   # sometimes (for division or ratio) it is dots 34 and sometimes (for function def) it is dots 25
   # the following is a very crude test that looks for "XXX : YYY â†’ ZZZ". Awaiting better information to improve the test.
    - test:
        - if: "@data-chemical-bond"
          then: [t: "Wâ †"]
        - else_if: "preceding-sibling::*[1][name(BaseNode(.))='mi'] and 
               following-sibling::*[1][self::m:mrow and *[2][.='â†’']]"
          then: [t: "â ’W"]
          else: [t: "Wâ Œ"]

 - ";": [t: "â †W"]               # 0x003B (Semicolon)
 - "<": [T: "Wâ £W"]               # 0x003C (less than sign)
 - "=":                          # 0x003D (regular equals sign)
     - test:
        - if: "@data-chemical-bond"
          then: [t: "Wâ ’â ’"]
          else: [t: "Wâ ¶"]

 - ">": [T: "Wâ ±W"]               # 0x003E (greater than sign ( regular ))
 - "?": [t: "Pâ ¢"]                # 0x003F (Question mark)
 - "@": [t: "â ˆ"]               # 0x0040 (Commercial at sign)
 - "[": [T: "["]                # 0x005B (left square bracket)
 - "]": [T: "]"]                # 0x005D (right square bracket)
 - "_": [t: "â ¬"]               # 0x005F (Low line (underscore))
 - "{": [T: "{"]                # 0x007B ( left curly brace)
 - "|":                         # 0x007C (vertical bar)
    - test:
      # catch |: notation
      # last child, inside a mrow with first child not | and the next child of the parent is ":"
        - if: ". and .. and
               not(following-sibling::*) and
               parent::*[self::m:mrow and count(*)=2 and not(*[1][.='|']) and
                         parent::*[self::m:mrow] and following-sibling::*[1][.=':']]
               "
          then: [t: "ğ–â ¸"]
        - else_if: "not(parent::*[self::m:mrow and count(*)=3 and *[1]='|'and *[3]='|'])"
          then: [t: "Wâ ¸W"]   # single vertical bar
        - else_if: "parent::*/*[2][self::m:mtable]"
          then: [t: "â ¸"]    # these act as brackets around the rows and shouldn't have whitespace dropped
          else: [t: "|"]     # absolute value -- need to use "|"" because whitespace needs to caught/dropped before it
 - "\"": [t: "â ¸"]
 - "â€": [t: "â ¸"]
 - "'": [t: "â ¨"]
 - "â€™": [t: "â ¨"]
 - "âˆ¤": [T: "â â ¸"]                # 0x2224 (does not divide)
 - "}": [T: "}"]                # 0x007D (right curly brace)
 - "~": [T: "â ¨â ¶"]                # 0x007E (simple tilde (is related to, is similar)) FI: in context of geometry. Tilde has different braille in general text.
 - "Â¢": [T: "â â â "]                # 0x00A2 (cent)
 - "Â£": [T: "â ‡"]                # 0x00A3 (pound sterling)
 - "Â§": [T: "â ¼"]                # 0x00A7 (single section mark)
 - "Â¬": [T: "Wâ ³â ²"]                # 0x00AC (not (negation in formal logic))
 - "Â°": [T: "â ´"]                # 0x00B0 (degree sign)
 - "Â·": [t: "Wâ „"]               # 0x00B7 (Multiplication dot (times))
 - "Â±": [T: "Wâ –â ¤"]                # 0x00B1 (plus or minus)
 - "âˆ“": [T: "Wâ ¤â –"]                # 0x2213 (minus or plus)
 - "Ã—": [T: "Wâ °â „"]                # 0x00D7 (vector or cross product)
 - "â€°": [T: "â ’â ¹"]                # 0x2030 (per mille sign)
 - "â€¦": [t: "â „â „â „"]               # 0x2026 (ellipsis)
 - "â€²":                         # 0x2032 (single prime)
    - test:
        if: "parent::m:msup and preceding-sibling::*[1][self::m:mn]"
        then: [t: "â ¨"]         # interpret as apostrophe ("minutes")
        else: [t: "â ”"]
 - "â€³":                         # 0x2033 (double prime)
    - test:
        if: "parent::m:msup and preceding-sibling::*[1][self::m:mn]"
        then: [t: "â ¸"]         # interpret as double quote ("seconds")
        else: [t: "â ”â ”"]
 - "â€´": [T: "â ”â ”â ”"]                # 0x2034 (triple prime)
 - "â‚¬": [T: "Wâ ˆâ ‘W"]                # 0x20AC (euro)  -- seems to have spaces around it in Finnish braille
 - "â†": [T: "Wâ £â ¤W"]                # 0x2190 (left pointing arrow)
 - "â†’": [T: "Wâ ¤â ±W"]               # 0x2192 (right pointing arrow)
 - "â†”": [T: "Wâ £â ¤â ±W"]                # 0x2194 (horizontal two-way arrow)
 - "â†—": [T: "Wâ ”â ±W"]                # 0x2197 (north east arrow)
 - "â†˜": [T: "Wâ ¢â ±W"]                # 0x2198 (south east arrow)
 - "â†–": [T: "Wâ £â ¢W"]                # 0x2196 (north west arrow)
 - "â†™": [T: "Wâ £â ”W"]                # 0x2199 (south west arrow)
 - "â†š": [T: "Wâ â £â ¤W"]                # 0x219A (leftwards arrow with stroke) FI: not in Finnish specification, but can be added
 - "â†›": [T: "Wâ â ¤â ±W"]                # 0x219B (rightwards arrow with stroke) FI: not in Finnish specification, but can be added
 - "â†®": [T: "Wâ â £â ¤â ±W"]

 - "â‡": [T: "Wâ £â ¤â ¤W"]                # 0x21D0 (leftwards double arrow) FI: not in Finnish specification, but can be added
 - "â‡’": [T: "Wâ ¤â ¤â ±W"]                # 0x21D2 (rightwards double arrow (implication))
 - "â‡”": [T: "Wâ £â ¤â ¤â ±W"]                # 0x21D4 (left right double arrow (double implication, equivalence))
 - "â‡„": [T: "Wâ £â ¤â ¤â ±W"]               # 0x21C4 (Rightwards Arrow Over Leftwards Arrow)
 - "â‡‹": [T: "Wâ £â ¤â ¤â ±W"]               # 0x21CB (Leftwards Harpoon Over Rightwards Harpoon)
 - "â‡": [T: "Wâ â £â ¤â ¤W"]                # 0x21CD (leftwards double arrow with stroke)
 - "â‡": [T: "Wâ â ¤â ¤â ±W"]                # 0x21CF (rightwards double arrow with stroke (does not imply))
 - "â‡": [T: "Wâ â £â ¤â ¤â ±W"]                # 0x21CE (left right double arrow with stroke (not equivalent))

 - "âˆ€": [T: "â ³â ‚"]                # 0x2200 (universal quantifier (for all, for each, for every))
 - "âˆƒ": [T: "â ³â ¢"]                # 0x2203 (existential quantifier (there exists, for some))
 - "âˆ„": [T: "â ³â â ¢"]                # 0x2204 (does not exist)
 - "âˆ…": [T: "Wâ ³â ´"]                # 0x2205 (empty set ( represented by zero with vertical or oblique bar through it))
 - "âˆ‡": [T: "â ¸â ²"]                # 0x2207 (del (nabla, gradient) , inverted triangle)
 - "âˆˆ": [T: "Wâ ³â ”"]                # 0x2208 (membership (is an element of))
 - "âˆ‰": [T: "Wâ ³â â ”"]                # 0x2209 (is not an element of)
 - "âˆ": [T: "Wâ ³â ¤"]              # 0x2201 (complement)

# FI: Same as the Greek letters. Are these needed?
#  - "âˆ": [T: "â ¸â "]                # 0x220F (n-ary product)
#  - "âˆ‘": [T: "â ¸â "]                # 0x2211 (n-ary summation)

 - "âˆ–": [T: "Wâ ³â ¡"]                # 0x2216 (back slash (FI: only meaning in Finnish is set difference))
 - "âˆ˜": [T: "Wâ ³â ¿"]                # 0x2218 (hollow dot)
 - "âˆ": [T: "â ¿"]                # 0x221E (infinity)
 - "âˆŸ": [T: "â —â ¸â ª"]                # 0x221F (right angle)
 - "âˆ ": [T: "â ¸â ª"]                # 0x2220 (angle)
 - "âˆ¡": [T: "â ¸â ª"]                # 0x2221 (angle with interior arc)
 - "âˆ¥": [T: "Wâ ¸â ¸W"]                # 0x2225 (is parallel to)
 - "âˆ¦": [T: "Wâ â ¸â ¸W"]                # 0x2226 (is not parallel to)
 - "âˆ§": [T: "Wâ ³â ©W"]                # 0x2227 (logical product (and, meet))
 - "âˆ¨": [T: "Wâ ³â ¬W"]                # 0x2228 (logical sum (join,or))
 - "âˆ©": [T: "Wâ ³â ¦"]                # 0x2229 (intersection sign ( cap ))
 - "âˆª": [T: "Wâ ³â –"]                # 0x222A (union sign)
 - "âˆ«": [T: "â ®"]                # 0x222B (single integral)
 - "âˆ¬": [T: "â ®â ®"]               # # 0x222C (double integral) FI: not in the specification
 - "âˆ­": [T: "â ®â ®â ®"]              # 0x222D (triple integral) FI: not in the specification
 - "âˆ‚": [T: "â ˆâ ™"]                # 0x2202 (partial derivative (round d))
 - "âˆ·": [T: "Wâ ¶"]                 # 0x2237 (Proportion) [only use in the spec is as a double bond with this value]
 - "âˆ¼": [t: "Wâ ¨â ¶"]                # 0x223C (simple tilde (is related to, is similar))
 - "â‰": [T: "â â ¨â ¶"]                # 0x2241 (not tilde) FI: Not in the specification, so this is a construction. Used in the context of geometry. Tilde has different braille in general text.
 - "â‰…": [T: "Wâ °â ¶"]                # 0x2245 (equals sign under tilde)
 - "â‰ˆ": [T: "Wâ ¸â ¶"]                # 0x2248 (double tilde, almost equal to)
 - "â‰™": [T: "Wâ ’â ’"]                # 0x2259 (caret over equals sign)
 - "â‰ ": [T: "Wâ â ¶"]                # 0x2260 (not equal to)
 - "â‰¡":                           # 0x2261 (identify (is congruent to, is identical with))
     - test:
        - if: "@data-chemical-bond"
          then: [t: "Wâ ’â ’â ’"]
          else: [t: "Wâ °â ¶"]
 - "â‰¢": [T: "Wâ â °â ¶"]                # 0x2262 (is not identical to) FI: Not in the specification, but can be used.
 - "â‰¤": [T: "Wâ £â ¶W"]                # 0x2264 (bar under less than sign (is less than or equal to))
 - "â‰¥": [T: "Wâ ±â ¶W"]                # 0x2265 (bar under greater than sign (is greater than or equal to))
 - "â‰ª": [T: "Wâ £â £W"]                # 0x226A (nest of two less than signs with straight sides (is small compared with))
 - "â‰«": [T: "Wâ ±â ±W"]                # 0x226B (nest of two greater than signs with straight sides (is large compared with))
 - "â‰®": [T: "Wâ â £W"]                # 0x226E (not less than)
 - "â‰¯": [T: "Wâ â ±W"]                # 0x226F (not greater than)
 - "â‰°": [T: "Wâ â £â ¶W"]                # 0x2270 (neither less-than nor equal to) FI: Not in the specification, but can be used.
 - "â‰±": [T: "Wâ â ±â ¶W"]                # 0x2271 (neither greater-than nor equal to) FI: Not in the specification, but can be used.
 - "âŠ‚": [T: "Wâ ³â ª"]                # 0x2282 (inclusion sign ( is contained in, is a subset of ))
 - "âŠ„": [T: "Wâ ³â â ª"]                # 0x2284 (not a subset of)
 - "âŠ†": [T: "Wâ ³â ¶â ª"]                # 0x2286 (bar under inclusion sign (is a subset of))
 - "âŠ¥": [T: "Wâ ¼â „W"]                # 0x22A5 (is perpendicular to)
 - "â‹…": [T: "Wâ „"]                # 0x22C5 (dot,and times)
 - "âŒª": [T: "â ±"]                # 0x232A (right angle bracket ( angular parenthesis ))
 - "âŸ¨": [T: "â £"]                # 0x27E8 (left angle bracket ( angular parenthesis ))

 - "â–¡": [T: "â «â Ÿ"]                # 0x25A1 (square)
 - "â–­": [T: "â «â —"]                # 0x25AD (rectangle)
 - "â–±": [T: "â «â "]                # 0x25B1 (parallelogram)
 - "â–³": [T: "â «â ™"]                # 0x25B3 (regular triangle (equilateral)  )
 - "âŒ’": [T: "â «â "]
 - "âª¥": [T: "Wâ ±â £W"]                # 0x2AA5 (greater than sign followed by less than sign)
 - "â««": [T: "Wâ ¼â §W"]                # 0x2AEB (double up tack (conditionally independent))
